<?php
defined('BASEPATH') OR exit('No direct script access allowed');

if(!function_exists('data_svm')){
	function data_svm(){
		return array(
			array(1,1 =>3.93,2 =>146,3 =>1,4 =>4),
			array(1,1 =>3.56,2 =>146,3 =>1,4 =>4),
			array(1,1 =>3.48,2 =>146,3 =>1,4 =>4),
			array(1,1 =>3.26,2 =>146,3 =>1,4 =>4),
			array(1,1 =>3.39,2 =>146,3 =>1,4 =>4),
			array(1,1 =>3.54,2 =>146,3 =>1,4 =>4),
			array(1,1 =>3.64,2 =>146,3 =>1,4 =>4),
			array(1,1 =>3.44,2 =>144,3 =>1,4 =>4),
			array(1,1 =>3.5,2 =>144,3 =>1,4 =>4),
			array(1,1 =>3.35,2 =>146,3 =>1,4 =>3.5),
			array(1,1 =>3.64,2 =>131,3 =>1,4 =>4),
			array(1,1 =>3.68,2 =>128,3 =>1,4 =>4),
			array(1,1 =>3.76,2 =>128,3 =>1,4 =>4),
			array(1,1 =>3.6,2 =>128,3 =>1,4 =>4),
			array(1,1 =>3.75,2 =>128,3 =>1,4 =>4),
			array(1,1 =>3.48,2 =>146,3 =>1,4 =>4),
			array(-1,1 =>1.69,2 =>138,3 =>1,4 =>5),
			array(1,1 =>3.77,2 =>146,3 =>1,4 =>4),
			array(1,1 =>2.85,2 =>142,3 =>0,4 =>4),
			array(-1,1 =>2.71,2 =>135,3 =>0,4 =>5),
			array(1,1 =>2.15,2 =>138,3 =>1,4 =>4),
			array(-1,1 =>1.83,2 =>135,3 =>1,4 =>5),
			array(-1,1 =>1.92,2 =>121,3 =>1,4 =>5),
			array(-1,1 =>2.29,2 =>132,3 =>1,4 =>5),
			array(-1,1 =>3.15,2 =>142,3 =>1,4 =>5),
			array(1,1 =>3.46,2 =>146,3 =>1,4 =>4),
			array(-1,1 =>1.87,2 =>135,3 =>1,4 =>5),
			array(1,1 =>3.84,2 =>146,3 =>1,4 =>4),
			array(1,1 =>3.72,2 =>146,3 =>0,4 =>4),
			array(1,1 =>3.07,2 =>140,3 =>1,4 =>4),
			array(1,1 =>3.33,2 =>146,3 =>0,4 =>4),
			array(1,1 =>3.3,2 =>146,3 =>1,4 =>4),
			array(-1,1 =>3.16,2 =>146,3 =>1,4 =>5),
			array(1,1 =>3.59,2 =>146,3 =>1,4 =>4),
			array(1,1 =>3.17,2 =>146,3 =>0,4 =>4),
			array(1,1 =>3.18,2 =>146,3 =>1,4 =>4),
			array(1,1 =>3.19,2 =>146,3 =>1,4 =>4),
			array(1,1 =>3.17,2 =>146,3 =>0,4 =>4),
			array(1,1 =>3.38,2 =>146,3 =>1,4 =>4),
			array(1,1 =>3.46,2 =>146,3 =>1,4 =>4),
			array(1,1 =>3.48,2 =>146,3 =>1,4 =>4),
			array(1,1 =>3.23,2 =>146,3 =>1,4 =>4),
			array(1,1 =>3.5,2 =>146,3 =>1,4 =>4),
			array(1,1 =>3.54,2 =>146,3 =>1,4 =>4),
			array(1,1 =>3.14,2 =>146,3 =>1,4 =>4),
			array(1,1 =>3.44,2 =>146,3 =>1,4 =>4),
			array(1,1 =>3.32,2 =>144,3 =>1,4 =>4),
			array(1,1 =>3.4,2 =>144,3 =>1,4 =>4),
			array(-1,1 =>3.39,146,3 =>1,4 =>5),
			array(-1,1 =>3.39,2 =>146,3 =>1,4 =>5),
			array(1,1 =>3.53,2 =>146,3 =>1,4 =>4),
			array(1,1 =>3.4,2 =>146,3 =>0,4 =>4),
			array(1,1 =>3.38,2 =>146,3 =>1,4 =>4),
			array(-1,1 =>3.33,2 =>146,3 =>1,4 =>5),
			array(-1,1 =>3.3,2 =>146,3 =>1,4 =>5),
			array(1,1 =>3.48,2 =>146,3 =>0,4 =>4),
			array(1,1 =>3.43,2 =>144,3 =>1,4 =>4),
			array(1,1 =>3.73,2 =>146,3 =>1,4 =>3.5),
			array(1,1 =>3.46,2 =>146,3 =>1,4 =>4),
			array(1,1 =>3.47,2 =>146,3 =>0,4 =>3.5),
			array(1,1 =>3.27,2 =>146,3 =>1,4 =>4),
			array(1,1 =>3.35,2 =>146,3 =>1,4 =>3.5),
			array(1,1 =>3.52,2 =>146,3 =>1,4 =>4),
			array(1,1 =>3.43,2 =>146,3 =>1,4 =>4),
			array(1,1 =>3.46,2 =>146,3 =>1,4 =>4),
			array(1,1 =>3.36,2 =>146,3 =>1,4 =>4),
			array(1,1 =>3.36,2 =>146,3 =>1,4 =>3.5),
			array(1,1 =>3.15,2 =>146,3 =>1,4 =>4),
			array(1,1 =>3.8,2 =>146,3 =>1,4 =>3.5),
			array(1,1 =>3.19,2 =>146,3 =>1,4 =>4),
			array(1,1 =>3.28,2 =>146,3 =>0,4 =>4),
			array(1,1 =>3.27,2 =>146,3 =>1,4 =>3.5),
			array(-1,1 =>1.79,2 =>117,3 =>1,4 =>4),
			array(-1,1 =>2.96,2 =>124,3 =>1,4 =>4),
			array(-1,1 =>1.17,2 =>114,3 =>1,4 =>4),
			array(-1,1 =>1.96,2 =>117,3 =>1,4 =>4),
			array(-1,1 =>1.96,2 =>117,3 =>1,4 =>4),
			array(1,1 =>3.21,2 =>126,3 =>1,4 =>4),
			array(-1,1 =>2.38,2 =>85,3 =>1,4 =>4),
			array(-1,1 =>3.5,2 =>146,3 =>1,4 =>5),
		);
	}
}

if(!function_exists('analyze_prediction')){
	function analyze_prediction($ipk, $sks, $organisasi, $lamastudi){
		$data = data_svm();
		$svm = new SVM();
		$model = $svm->train($data);
		$data = array(1=>floatval($ipk),2=>intval($sks),3=>intval($organisasi),4=>floatval($lamastudi));
		$result = $model->predict($data);
		return conditional_rendering($result, 1, 'Tepat Waktu', 'Tidak Tepat Waktu');
		// $model->save('model.svm');
		// $result == 1 = tepat waktu
		// $result == -1 = tidak tepat waktu

		/* Instalation SVM
       		Download SVM Ekstension for php in https://pecl.php.net/package/svm
			put in "C:\xampp\php\ext"
			add variable php.ini to
			extension = "C:\xampp\php\ext\php_svm.dll"
			;extension = "C:\xampp\php\ext\php_svm.dll"
        */
	}
}
